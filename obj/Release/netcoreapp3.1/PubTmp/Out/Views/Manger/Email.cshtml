@model List<Maticsoft.Model.Message>

@{
    Layout = null;
}
<!DOCTYPE html>
<html class="iframe-h">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>官网后台</title>
    @*<link rel="stylesheet" type="text/css" href="~/Content/static/admin/layui/css/layui.css" />
        <link rel="stylesheet" type="text/css" href="~/Content/static/admin/css/admin.css" />*@
    <link href="~/static/admin/layui/css/layui.css" rel="stylesheet" />
    <link href="~/static/admin/css/admin.css" rel="stylesheet" />
    <link href="~/static/admin/css/hsycmsAlert.css" rel="stylesheet" />
</head>
<body class="iframe-h">
    <div class="wrap-container email-wrap clearfix">
        <div class="row">
            <div class="col-lg-15">
                <div class="email-content">
                    <div class="email-content-title layui-form">
                        <span class="write-title">留言板</span>
                    </div>
                    <div class="email-tool-btn clearfix">
                        <div class="col-lg-6 email-tool-btn-left">
                            <a class="layui-btn layui-btn-small layui-btn-primary" href="/Manger/Email">
                                <i class="layui-icon">&#x1002;</i>
                            </a>
                        </div>
                        <div class="col-lg-6 email-tool-btn-right">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <input type="text" name="title" required lay-verify="required" placeholder="搜索邮件标题" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-inline">
                                    <button class="layui-btn layui-btn-normal search-btn">搜索</button>
                                </div>

                            </div>
                        </div>
                    </div>
                    @*<button type="button" onclick="testClick(123)" style="background:#17d397;">自定义弹窗</button>*@


                    <div class="hsycms-model-mask" onclick="hsycms.closeAll()" id="mask-model"></div>
                    <div class="hsycms-model hsycms-model-model" id="model">
                        <div class="hscysm-model-title">留言详情</div>
                        <p class="hsycms-model-content" id="alertPop" style="word-wrap: break-word;">

                        </p>
                    </div>
                    <div class="layui-form email-list">
                        <table class="layui-table" lay-even lay-skin="nob" width="100%">
                            <colgroup>
                                <col width="100">
                                <col width="150">
                                <col>
                                <col class="hidden-xs" width="200">
                                <col class="hidden-xs" width="150">
                            </colgroup>
                            <thead>
                                <tr>
                                    <!-- <th><input type="checkbox" name="" lay-skin="primary" lay-filter="emailAllChoose"></th> -->
                                    <th>姓名</th>
                                    <th>电话</th>
                                    <th>内容</th>
                                    <th>提交时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    foreach (var m in Model)
                                    {
                                        <tr @m.ID>


                                            <td><a value="联系地址: @m.MAdress        邮箱:@m.MEmail" data-url="" onclick="testClick(this)">@m.MName</a></td>
                                            <td>@m.avg2</td>
                                            <td style=" max-width: 500px !important; overflow: hidden !important; text-overflow: ellipsis !important; white-space: nowrap !important;"> <a value="@m.MContent" data-url="" onclick="testClick(this)">@m.MContent</a></td>
                                            @*<div class="hsycms-model-mask" onclick="hsycms.closeAll()" id="mask-model"></div>
                                                <div class="hsycms-model hsycms-model-model" id="model">
                                                    <div class="hscysm-model-title">留言详情</div>
                                                    <div class="hsycms-model-content">
                                                        @m.MContent
                                                    </div>
                                                </div>*@
                                            <td>@m.MDate</td>
                                            <td>
                                                <div class="layui-inline">
                                                    <a class="layui-btn layui-btn-mini layui-btn-normal  go-btn " value="@m.MContent" data-url="" onclick="testClick(this)"><i class="layui-icon">&#xe642;</i></a>
                                                    @*<a class="layui-btn layui-btn-mini layui-btn-normal  go-btn " onclick="hsycms.alert('model')" data-id="@m.MContent" data-url=""><i class="layui-icon">&#xe642;</i></a>*@

                                                    <a class="layui-btn layui-btn-mini layui-btn-danger del-btn" data-id="3" data-url="/Manger/EmailDel" href="/Manger/EmailDel/@m.ID"><i class="layui-icon">&#xe640;</i></a>
                                                </div>

                                            </td>

                                        </tr>
                                    }

                                }
                            </tbody>
                        </table>
                        <div class="page-wrap">
                            <ul class="pagination">
                                <li class="previous disabled"><a href="?page=1@ViewBag.Str">«</a></li>
                                @for (int page = 1; page <= (int)ViewBag.PageCount; page++)
                                {
                                    if (((int)ViewBag.CurrentPage) == page)
                                    {
                                        <li><a class="active" href="?page=@ViewBag.Str">@ViewBag.CurrentPage</a></li>
                                    }
                                    else
                                    {
                                        <li><a href="?page=@ViewBag.Str">@ViewBag.CurrentPage</a></li>
                                    }
                                }
                                <li class="next"><a href="?page=@ViewBag.PageCount@ViewBag.Str">»</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    @*<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>*@
    <script src="~/Scripts/jquery-3.4.1.js"></script>
    <script src="~/static/admin/layui/layui.js"></script>

    @*<script src="~/static/admin/layui/layui.js" type="text/javascript"></script>*@
    <script src="~/static/admin/js/hsycmsAlert.js"></script>
    <script type="text/javascript">
        function testClick(self) {
            let alertPop = document.getElementById('alertPop')
            alertPop.innerText = self.getAttribute('value') + self.getAttribute('valuee')
            hsycms.alert('model')
        }
        layui.use(['form', 'laypage', 'jquery', 'layer'], function () {
            var form = layui.form(),
                layer = layui.layer,
                laypage = layui.laypage,
                $ = layui.jquery;
            //获取当前iframe的name值
            var iframeObj = $(window.frameElement).attr('name');

            $('#write-email-btn').on('click', function () {
                parent.page("写邮件", 'email-write.html', iframeObj, w = "700px", h = "600px");
            })
            //列表
            $('.email-folder').on('click', 'a', function () {
                var url = $(this).attr('data-url');
                $('#iframeEmail').attr('src', url);

            })
            $('.email-tool-btn .f-l').on('mouseenter', 'button', function () {
                var title = $(this).attr('data-title');
                var id = '#' + $(this).attr('id');
                layer.tips(title, id, {
                    tips: [1, '#444c63'],
                    time: 1000
                });
            })
            //分页
            laypage({
                cont: 'email-page'
                , pages: 10
                , skin: '#1E9FFF'
            });
            form.on('checkbox(emailAllChoose)', function (data) {
                var child = $(data.elem).parents('table').find('tbody input[type="checkbox"]');
                child.each(function (index, item) {
                    item.checked = data.elem.checked;
                });
                form.render('checkbox');
            });

            form.render();
            //非手机端，设置高度
            if (window.innerWidth >= 768) {
                $('.email-content').css('height', window.innerHeight - 30);
            }
            $(window).resize(function () {
                $('.email-content').css('height', window.innerHeight - 30);
            })
        });


    </script>

</body>
</html>